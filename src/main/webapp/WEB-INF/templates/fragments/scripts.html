<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
</head>
<body>
	<script th:fragment="scripts" >
	/*<![CDATA[*/
		function setUsername(){
			   document.getElementById('hidden').value = 
				   (document.getElementById('rut').value+':'+
				   document.getElementById('nom').value+':'+
				   document.getElementById('sur').value).toLowerCase();
		}
	
		function setRolesyPermisos(){
			var roles= "";
			var permisos ="";
			if(document.getElementById("checkAdmin").checked) roles+=" ADMIN,";
			if(document.getElementById("checkTrainer").checked) roles+=" ENTRENADOR,";
			if(document.getElementById("checkDTI").checked) roles+=" PERSONALDTI,";
			if(document.getElementById("checkPYC").checked) permisos+=" MOSTRAR,";
			if(document.getElementById("checkADU").checked) permisos+=" USUARIOS,";
			if(document.getElementById("checkSEDE").checked) permisos+=" SEDES,";
			if(document.getElementById("checkSALA").checked) permisos+=" SALA_LVL1,";
			if(document.getElementById("checkSALA2").checked) permisos+=" SALA_LVL2,";
			if(document.getElementById("checkADPYC").checked) permisos+=" EXTRAS,";
			if(roles != ""){
				roles = roles.slice(1,-1);
			}
			if(roles != ""){
				permisos = permisos.slice(1,-1);
			}
			document.getElementById("rolId").value=roles;
			document.getElementById("permId").value=permisos;
		}
		
		function getActive(){
			var activo = document.getElementById('pagina').value.split(":");
			switch(activo[0]){
				case "home":
					document.getElementById('navLinkHome').className += " active itemNavActive";
				    break;
				case "usuarios":
					document.getElementById('navLinkUsers').className += " active itemNavActive";
				    break;
				case "sedes":
					document.getElementById('navLinkSedes').className += " active itemNavActive";
				    break;
				case "planes":
					document.getElementById('navLinkPlanes').className += " active itemNavActive";
				    break;
				case "clases":
					document.getElementById('navLinkClases').className += " active itemNavActive";
				    break;
				case "salas":
					document.getElementById('navLinkSalas').className += " active itemNavActive";
					break;
				case "equipos":
					document.getElementById('navLinkEquipos').className += " active itemNavActive";
				    break;
				case "miSede":
					document.getElementById('navLinkMiSede').className += " active itemNavActive";
					break;
			}
		}
		function ocuparSala(parametro){
			var sala= parametro.split(":")[0];
			var user= parametro.split(":")[1];
			var url = "http://localhost:8080/SmartAppG5/miSede/ocupar?salaId="+sala+"&userId="+user;
			var xhr = new XMLHttpRequest();

			xhr.open('GET', url, true);

			xhr.addEventListener('error', function(e) {
			  console.log('Un error ocurrió', e);
			});

			xhr.addEventListener('readystatechange', function() {
			  console.log('xhr.readyState:', xhr.readyState);
			});
			
			xhr.onreadystatechange = function(){
				
				if(this.readyState == 4 && this.status == 200){
				window.location.reload(false);
		        console.log(xhr.responseText);
		    	}
			};
			xhr.send();
			
		
		}
		function liberarSala(parametro){
			var user= parametro.split(":")[1];
			var url = "http://localhost:8080/SmartAppG5/miSede/liberar?userId="+user;
			var xhr = new XMLHttpRequest();

			xhr.open('GET', url, true);

			xhr.addEventListener('error', function(e) {
			  console.log('Un error ocurrió', e);
			});

			xhr.addEventListener('readystatechange', function() {
			  console.log('xhr.readyState:', xhr.readyState);
			});
			
			xhr.onreadystatechange = function(){
				
				if(this.readyState == 4 && this.status == 200){
				window.location.reload(false);
		        console.log(xhr.responseText);
		        }
			};
			xhr.send();
			
		
		}

	/*]]>*/
	</script>
</body>
</html>